!function(){"use strict";angular.module("tagsInput",["autoGrowInput","selectOptions","disableAll","ngSanitize"])}(),angular.module("tagsInput").run(["$templateCache",function(t){t.put("tags-input.html",'<div class="tags-input" ng-attr-style="{{ getContainerWidth() > 0 ? \'max-width: \' + getContainerWidth()  + \'px\' : \'\' }}" disable-all="disabled">\n    <div ng-repeat="tag in getTags()" class="token-item">\n        <div class="token" tabindex="{{ $index }}"\n             ng-click="tagSelect($event, tag)"\n             ng-class="{ selected: isSelected(tag) }">\n            <div class="token-template" ng-bind-html="getItemName(tag)"></div>\n            <a class="token-remove" ng-show="isRemoveButtonEnabled" ng-click="tagRemove($event, $index)">Ã—</a>\n        </div>\n\n    </div>\n    <div class="token-item">\n        <input auto-grow-input\n               ng-model="tokenInputValue"\n               ng-change="onInputValueChange(tokenInputValue)"\n               ng-attr-placeholder="{{ !getTags().length ? placeholder : \'\' }}"\n               autocomplete="off"\n               ng-disabled="isDisabled">\n    </div>\n    <div class="loading" ng-show="loadingInProgress"></div>\n</div>\n')}]),function(){"use strict";function t(){return{scope:{ngModel:"=",placeholder:"@",minLength:"=?",maxLength:"=?",maxItems:"=?",uniqueNames:"=?",delimiters:"@",disabled:"=?",noPersist:"=?",isRemoveButton:"=?",isRestoreOnBackspace:"=?",decorator:"=?",caretPosition:"=?",tokenInputValue:"=?",containerWidth:"=?"},replace:!0,restrict:"E",require:["ngModel","selectOptions"],templateUrl:"tags-input.html",controller:"TagsInputCtrl"}}function e(t,e,n,i,o,a,u){var r=this,s=e.controller("ngModel"),c=e.controller("selectOptions"),l=new i,d=new o(s),g=new a,f=e[0].querySelector("input"),h=c.getItemNameWithoutPrefixes();t.isRemoveButtonEnabled=!0,g.set({minLength:t.minLength,maxLength:t.maxLength,maxItems:t.maxItems,nameField:h,checkUnique:t.uniqueNames});var p=function(e){t.caretPosition=e,m(e)},m=function(t){var n=e[0].getElementsByClassName("token-item");n[t]&&e[0].insertBefore(f,n[t])};this.clearInputValue=function(){t.tokenInputValue="",f.value="",f.dispatchEvent(new CustomEvent("update")),f.focus(),I("")};var v=[];this.onTextEntered=function(t){v.push(t)};var I=function(t){angular.forEach(v,function(e){e(t)})},k=function(){if(t.tokenInputValue){var e=c.createItem(t.tokenInputValue.trim());t.noPersist!==!0&&g.canItemBeAdded(d.getAll(),e)!==!1&&(d.add(e,t.caretPosition),E(),p(t.caretPosition+1),r.clearInputValue())}},V=function(){t.tokenInputValue||t.caretPosition<=0||(p(t.caretPosition-1),f.focus())},A=function(){t.tokenInputValue||t.caretPosition>=d.count()||(p(t.caretPosition+1),f.focus())},$=function(){t.tokenInputValue||0===d.count()||(d.removeAll(l.getAll()),E(),f.dispatchEvent(new CustomEvent("update")),p(d.count()),l.clear(),f.focus())},y=function(){if(!(t.tokenInputValue||0===d.count()||t.caretPosition<=0)){if(p(t.caretPosition-1),t.isRestoreOnBackspace){var e=d.get(t.caretPosition);t.tokenInputValue=(h?e[h]:e)+" ",f.value=t.tokenInputValue,I(f.value)}d.removeAt(t.caretPosition),E(),m(t.caretPosition),f.dispatchEvent(new CustomEvent("update")),f.focus()}},w=function(){t.tokenInputValue||0===d.count()||(d.removeAt(t.caretPosition),E(),m(t.caretPosition),f.dispatchEvent(new CustomEvent("update")),I(f.value),f.focus())},E=function(){n.onChange&&u(function(){c.applyOnScope(n.onChange)})};t.getContainerWidth=function(){return t.containerWidth?t.containerWidth:e[0].offsetWidth},t.getTags=function(){var t=s.$modelValue;return t&&!angular.isArray(t)?[t]:t},t.getItemName=function(e){var n=c.parseItemValueFromSelection(e);return n=String(n).replace(/<[^>]+>/gm,""),t.decorator?t.decorator(e):n},t.onInputValueChange=function(t){f.dispatchEvent(new CustomEvent("update")),I(t),l.clear()},t.isSelected=function(t){return l.has(t)},t.tagSelect=function(t,e){t.stopPropagation(),t.altKey||t.ctrlKey||t.shiftKey?l.toggle(e):(l.clear(),l.add(e)),p(d.count())},t.tagRemove=function(t,e){t.stopPropagation(),d.removeAt(e),E(),p(d.count()),l.clear(),f.blur()},e[0].addEventListener("click",function(){p(d.count()),f.focus(),l.clear(),t.$digest()}),e[0].addEventListener("keydown",function(e){switch(e.keyCode){case 65:return void(!e.ctrlKey&&!e.metaKey||t.tokenInputValue||(l.addAll(d.getAll()),t.$digest()));case 13:return k(),void t.$apply();case 37:return V(),void t.$apply();case 39:return A(),void t.$apply();case 8:return l.hasAny()?$():y(),void t.$digest();case 46:return l.hasAny()?$():w(),void t.$digest()}}),e[0].addEventListener("keypress",function(e){var n=!1;angular.forEach(t.delimiters,function(i){n===!1&&e.keyCode===i.charCodeAt(0)&&(k(),e.preventDefault(),t.$apply(),n=!0)})}),document.addEventListener("mousedown",function(n){e[0].contains(n.target)||(l.clear(),p(d.count()),t.$digest())}),t.$watch("ngModel",function(){p(d.count())}),t.$watch("caretPosition",function(t,e){t!==e&&p(t)}),t.$watch("isRemoveButton",function(e){angular.isDefined(t.isRemoveButton)&&(t.isRemoveButtonEnabled=e)}),t.$on("tags-input.clear_input",function(){r.clearInputValue()})}angular.module("tagsInput").directive("tagsInput",t),angular.module("tagsInput").controller("TagsInputCtrl",e),e.$inject=["$scope","$element","$attrs","SelectedTokensRegistry","ArrayNgModelHelper","SelectedTokensValidator","$timeout"]}(),function(){"use strict";function t(){return function(){var t,e=function(e){return t.nameField?e[t.nameField]:e};this.set=function(e){t=e},this.isUnique=function(n,i){if(!t.checkUnique)return!0;var o=!1;return angular.forEach(n,function(t){var n=e(t),a=e(i);n&&a&&n.toLowerCase()===a.toLowerCase()&&(o=!0)}),o===!1},this.isNotEmpty=function(t){return e(t).length>0},this.isNotShort=function(n){return angular.isUndefined(t.minLength)||e(n).length>=t.minLength},this.isNotLong=function(n){return angular.isUndefined(t.maxLength)||e(n).length<=t.maxLength},this.isNotMaxAllowed=function(e){return angular.isUndefined(t.maxItems)||e<t.maxItems},this.canItemBeAdded=function(t,e){return this.isNotEmpty(e)&&this.isUnique(t,e)&&this.isNotShort(e)&&this.isNotLong(e)&&this.isNotMaxAllowed(t.length)}}}angular.module("tagsInput").factory("SelectedTokensValidator",t)}(),function(){"use strict";function t(){return function(){var t=[];this.getAll=function(){return t},this.hasAny=function(){return 0!==t.length},this.has=function(e){return-1!==t.indexOf(e)},this.add=function(e){t.push(e)},this.addAll=function(e){angular.forEach(e,function(e){t.push(e)})},this.remove=function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},this.toggle=function(t){this.has(t)?this.remove(t):this.add(t)},this.clear=function(){t=[]}}}angular.module("tagsInput").factory("SelectedTokensRegistry",t)}(),function(){"use strict";function t(){return function(t){var e=this;e.onChange=function(e,n){e.$watch(function(){return t.$modelValue},n)},e.getAll=function(){return t.$modelValue||[]},e.get=function(t){var n=e.getAll();return n[t]},e.has=function(t){var n=e.getAll();return-1!==n.indexOf(t)},e.set=function(e){t.$setViewValue(e)},e.add=function(n,i){var o=e.getAll();o.splice(i,0,n),t.$setViewValue(o)},e.remove=function(n){var i=e.getAll(),o=i.indexOf(n);-1!==o&&i.splice(o,1),t.$setViewValue(i)},e.removeAt=function(n){var i=e.getAll();i.splice(n,1),t.$setViewValue(i)},e.removeAll=function(n){var i=e.getAll();angular.forEach(n,function(t){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}),t.$setViewValue(i)},e.count=function(){return e.getAll().length}}}angular.module("tagsInput").factory("ArrayNgModelHelper",t)}();